###############################################################################
# Money Primitive Value Object API Tests
# 
# Demonstrates the Money primitive value object with:
# - Currency-safe arithmetic operations
# - Currency mismatch prevention
# - Different currency decimal places (USD=2, JPY=0, BHD=3)
# - Money allocation (splitting without rounding loss)
###############################################################################

###############################################################################
# Money Creation and Basic Operations
###############################################################################

### Create Money - USD (200 OK)
POST {{host}}/money/create
Content-Type: application/json

{
  "amount": 99.99,
  "currency": "USD"
}

### Create Money - EUR (200 OK)
POST {{host}}/money/create
Content-Type: application/json

{
  "amount": 85.50,
  "currency": "EUR"
}

### Create Money - JPY (200 OK)
# Japanese Yen has no decimal places
POST {{host}}/money/create
Content-Type: application/json

{
  "amount": 10000,
  "currency": "JPY"
}

### Create Money - BHD (200 OK)
# Bahraini Dinar has 3 decimal places
POST {{host}}/money/create
Content-Type: application/json

{
  "amount": 45.123,
  "currency": "BHD"
}

### Create Money - Negative Amount (400 Bad Request)
POST {{host}}/money/create
Content-Type: application/json

{
  "amount": -50.00,
  "currency": "USD"
}

### Create Money - Invalid Currency (400 Bad Request)
POST {{host}}/money/create
Content-Type: application/json

{
  "amount": 100.00,
  "currency": "INVALID"
}

###############################################################################
# Arithmetic Operations
###############################################################################

### Add Money - Same Currency (200 OK)
POST {{host}}/money/add
Content-Type: application/json

{
  "left": {
    "amount": 50.25,
    "currency": "USD"
  },
  "right": {
    "amount": 25.75,
    "currency": "USD"
  }
}

### Add Money - Different Currency (400 Bad Request)
# Should fail with "Cannot add EUR to USD"
POST {{host}}/money/add
Content-Type: application/json

{
  "left": {
    "amount": 50.00,
    "currency": "USD"
  },
  "right": {
    "amount": 40.00,
    "currency": "EUR"
  }
}

### Subtract Money - Same Currency (200 OK)
POST {{host}}/money/subtract
Content-Type: application/json

{
  "left": {
    "amount": 100.00,
    "currency": "USD"
  },
  "right": {
    "amount": 35.50,
    "currency": "USD"
  }
}

### Subtract Money - Different Currency (400 Bad Request)
POST {{host}}/money/subtract
Content-Type: application/json

{
  "left": {
    "amount": 100.00,
    "currency": "USD"
  },
  "right": {
    "amount": 35.50,
    "currency": "GBP"
  }
}

### Multiply Money - By Decimal (200 OK)
POST {{host}}/money/multiply
Content-Type: application/json

{
  "money": {
    "amount": 19.99,
    "currency": "USD"
  },
  "multiplier": 3.5
}

### Multiply Money - By Quantity (200 OK)
POST {{host}}/money/multiplyByQuantity
Content-Type: application/json

{
  "money": {
    "amount": 12.50,
    "currency": "USD"
  },
  "quantity": 5
}

### Multiply Money - Negative Multiplier (400 Bad Request)
POST {{host}}/money/multiply
Content-Type: application/json

{
  "money": {
    "amount": 50.00,
    "currency": "USD"
  },
  "multiplier": -2
}

### Divide Money - By Decimal (200 OK)
POST {{host}}/money/divide
Content-Type: application/json

{
  "money": {
    "amount": 100.00,
    "currency": "USD"
  },
  "divisor": 3
}

### Divide Money - By Zero (400 Bad Request)
POST {{host}}/money/divide
Content-Type: application/json

{
  "money": {
    "amount": 100.00,
    "currency": "USD"
  },
  "divisor": 0
}

###############################################################################
# Money Allocation (Splitting)
###############################################################################

### Allocate Money - Equal Split (200 OK)
# Splits $100 into 3 equal parts (no money lost to rounding)
POST {{host}}/money/allocate
Content-Type: application/json

{
  "money": {
    "amount": 100.00,
    "currency": "USD"
  },
  "ratios": [1, 1, 1]
}

### Allocate Money - Ratio Split (200 OK)
# Splits $100 into 25%, 50%, 25%
POST {{host}}/money/allocate
Content-Type: application/json

{
  "money": {
    "amount": 100.00,
    "currency": "USD"
  },
  "ratios": [1, 2, 1]
}

### Allocate Money - Complex Ratio (200 OK)
# Revenue sharing: 60%, 30%, 10%
POST {{host}}/money/allocate
Content-Type: application/json

{
  "money": {
    "amount": 999.99,
    "currency": "USD"
  },
  "ratios": [6, 3, 1]
}

### Allocate Money - No Ratios (400 Bad Request)
POST {{host}}/money/allocate
Content-Type: application/json

{
  "money": {
    "amount": 100.00,
    "currency": "USD"
  },
  "ratios": []
}

### Allocate Money - Negative Ratio (400 Bad Request)
POST {{host}}/money/allocate
Content-Type: application/json

{
  "money": {
    "amount": 100.00,
    "currency": "USD"
  },
  "ratios": [1, -2, 1]
}

###############################################################################
# Comparison Operations
###############################################################################

### Compare Money - Greater Than (200 OK)
POST {{host}}/money/compare
Content-Type: application/json

{
  "left": {
    "amount": 100.00,
    "currency": "USD"
  },
  "right": {
    "amount": 50.00,
    "currency": "USD"
  },
  "operation": "greaterThan"
}

### Compare Money - Less Than (200 OK)
POST {{host}}/money/compare
Content-Type: application/json

{
  "left": {
    "amount": 25.00,
    "currency": "USD"
  },
  "right": {
    "amount": 50.00,
    "currency": "USD"
  },
  "operation": "lessThan"
}

### Compare Money - Different Currency (400 Bad Request)
# Cannot compare different currencies
POST {{host}}/money/compare
Content-Type: application/json

{
  "left": {
    "amount": 100.00,
    "currency": "USD"
  },
  "right": {
    "amount": 80.00,
    "currency": "EUR"
  },
  "operation": "greaterThan"
}

###############################################################################
# Real-World Scenarios
###############################################################################

### Shopping Cart - Calculate Total (200 OK)
# Add multiple items together
POST {{host}}/money/cart-total
Content-Type: application/json

{
  "items": [
    { "amount": 19.99, "currency": "USD" },
    { "amount": 29.99, "currency": "USD" },
    { "amount": 9.99, "currency": "USD" },
    { "amount": 14.99, "currency": "USD" }
  ]
}

### Apply Discount - 15% Off (200 OK)
POST {{host}}/money/apply-discount
Content-Type: application/json

{
  "originalPrice": {
    "amount": 99.99,
    "currency": "USD"
  },
  "discountPercent": 15
}

### Split Bill - Restaurant (200 OK)
# Split $87.50 among 4 people
POST {{host}}/money/split-bill
Content-Type: application/json

{
  "total": {
    "amount": 87.50,
    "currency": "USD"
  },
  "people": 4
}

### Revenue Share - 3-Way Split (200 OK)
# Platform (10%), Creator (70%), Referrer (20%)
POST {{host}}/money/revenue-share
Content-Type: application/json

{
  "revenue": {
    "amount": 1000.00,
    "currency": "USD"
  },
  "platformPercent": 10,
  "creatorPercent": 70,
  "referrerPercent": 20
}
