
POST {{host}}/authentication/register
Content-Type: application/json

{
    "firstName":"Xavier",
    "lastName":"John",
    "email":"someone@somewhere.com",
    "password":"Amiko1232!"
}

###
POST {{host}}/authentication/registerCreated
Content-Type: application/json

{
    "firstName":"Xavier",
    "lastName":"John",
    "email":"someone@somewhere.com",
    "password":"Amiko1232!"
}

###
POST {{host}}/authentication/registerAccepted
Content-Type: application/json

{
    "firstName":"Xavier",
    "lastName":"John",
    "email":"someone@somewhere.com",
    "password":"Amiko1232!"
}

### Bad Request
POST {{host}}/authentication/registerCreated
Content-Type: application/json

{
    "firstName":"Xavier",
    "email":"someone@somewhere.com",
    "password":"Amiko1232!"
}

###############################################################################
# NEW: Automatic Value Object Validation
# These endpoints use RegisterUserDto with value objects (FirstName, LastName, EmailAddress)
# ASP.NET Core automatically validates them during model binding - no manual Result.Combine() needed!
###############################################################################

### Automatic Validation - Success
# All value objects are valid - returns 200 OK
POST {{host}}/users/RegisterWithAutoValidation
Content-Type: application/json

{
    "firstName": "Xavier",
    "lastName": "John",
    "email": "xavier@example.com",
    "password": "SecurePass123!"
}

### Automatic Validation - Invalid Email
# Email address is invalid (missing @) - returns 400 Bad Request
# The framework automatically validates EmailAddress during model binding
POST {{host}}/users/RegisterWithAutoValidation
Content-Type: application/json

{
    "firstName": "Xavier",
    "lastName": "John",
    "email": "not-an-email",
    "password": "SecurePass123!"
}

### Automatic Validation - Missing FirstName
# FirstName is null - returns 400 Bad Request
# RequiredString validation happens automatically
POST {{host}}/users/RegisterWithAutoValidation
Content-Type: application/json

{
    "lastName": "John",
    "email": "xavier@example.com",
    "password": "SecurePass123!"
}

### Automatic Validation - Empty LastName
# LastName is empty string - returns 400 Bad Request
POST {{host}}/users/RegisterWithAutoValidation
Content-Type: application/json

{
    "firstName": "Xavier",
    "lastName": "",
    "email": "xavier@example.com",
    "password": "SecurePass123!"
}

### Automatic Validation - Multiple Errors
# Multiple validation errors - all are collected and returned
# No firstName, invalid email format
POST {{host}}/users/RegisterWithAutoValidation
Content-Type: application/json

{
    "lastName": "John",
    "email": "invalid-email",
    "password": "SecurePass123!"
}

###############################################################################
# Shared Value Object Type Test
# This endpoint uses the same "Name" value object for both FirstName and LastName
# The key test: validation errors should show "FirstName" and "LastName" as field names,
# NOT "Name" (the type name)
###############################################################################

### Shared Name Type - Success
# Both FirstName and LastName use "Name" type - returns 200 OK
POST {{host}}/users/RegisterWithSharedNameType
Content-Type: application/json

{
    "firstName": "John",
    "lastName": "Doe",
    "email": "john@example.com"
}

### Shared Name Type - Both Names Empty
# KEY TEST: Both use "Name" type but errors should show "FirstName" and "LastName"
# Expected response: {"errors":{"FirstName":["Name cannot be empty."],"LastName":["Name cannot be empty."]}}
POST {{host}}/users/RegisterWithSharedNameType
Content-Type: application/json

{
    "firstName": "",
    "lastName": "",
    "email": "john@example.com"
}

### Shared Name Type - Only FirstName Empty
# Error should show "FirstName" not "Name"
POST {{host}}/users/RegisterWithSharedNameType
Content-Type: application/json

{
    "firstName": "",
    "lastName": "Doe",
    "email": "john@example.com"
}

### Shared Name Type - Only LastName Empty
# Error should show "LastName" not "Name"
POST {{host}}/users/RegisterWithSharedNameType
Content-Type: application/json

{
    "firstName": "John",
    "lastName": "",
    "email": "john@example.com"
}

### Shared Name Type - All Invalid
# All three fields invalid - errors should show correct field names
POST {{host}}/users/RegisterWithSharedNameType
Content-Type: application/json

{
    "firstName": "",
    "lastName": "",
    "email": "not-valid"
}
